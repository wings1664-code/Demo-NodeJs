<%- include('../layout') %>
<h1>Edit Product</h1>
<form action="/products/edit/<%= product.id || product._id %>" method="POST">
  <label>Name:</label>
  <input type="text" name="name" value="<%= product.name %>" required>
  <label>Price:</label>
  <input type="number" name="price" value="<%= product.price %>" step="0.01" required>
  <label>Category:</label>
  <select name="categoryId" required>
    <% categories.forEach(category => { %>
      <option value="<%= category.id || category._id %>" <%= (category.id || category._id).toString() === (product.categoryId.id || product.categoryId._id || product.categoryId).toString() ? 'selected' : '' %>><%= category.name %></option>
    <% }) %>
  </select>
  <label>Subcategory:</label>
  <select name="subcategoryId" required>
    <% subcategories.forEach(subcategory => { %>
      <option value="<%= subcategory.id || subcategory._id %>" <%= (subcategory.id || subcategory._id).toString() === (product.subcategoryId.id || product.subcategoryId._id || product.subcategoryId).toString() ? 'selected' : '' %>><%= subcategory.name %></option>
    <% }) %>
  </select>
  <button type="submit">Update</button>
</form>
<a href="/products/list">Back to List</a>